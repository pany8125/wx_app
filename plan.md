## 产品概述

微信小程序“AI培效通”，用于培训前设置现场题目，学员扫码进入场次在培训过程中作答，讲师基于报告评估培训效果。

## 核心特性

- 场次管理：创建培训场次、设置开关/截止时间与扫码入口。
- 题目配置：多题型（单选/多选/填空/主观/评分），可按场次编排。
- 答题体验：学员微信一键登录，扫码直达场次答题，限时与进度提示。
- 角色区分：学员与讲师（管理员）权限分离。
- 数据与报告：整体得分、题目分析、多维图表，支持导出/保存，培训中实时查看与事后回顾。

## 技术栈

- 前端：微信小程序（原生/自定义组件）+ WXML/WXSS/JS
- 后端优先方案：微信云开发（云函数 + 云数据库 + 云存储 + 云调用鉴权）
- 可选自建后端：Node.js + Koa/NestJS，数据库（MongoDB/MySQL），通过 HTTPS API + 小程序登录态校验

## 实现思路

- 场次与题库：以“场次”主实体关联题组与答题窗口，题目支持多题型配置与顺序/必答属性。
- 鉴权与角色：使用微信登录态与云开发/自建后端的会话校验，用户表记录角色（学员/讲师），接口做权限控制。
- 答题流：扫码携场次 ID → 校验场次有效与时间窗口 → 拉取题目 → 提交答卷（持久化作答明细与统计）。
- 报告与统计：云函数/后端聚合计算整体得分、题目正确率、维度分布，生成可视化数据；支持导出（图片/PDF 可延后）。
- 性能与可靠性：读多写少场景下，题目与场次配置可本地缓存/预取；提交写操作走幂等校验；统计聚合异步化避免阻塞答题。

## 目录结构（初稿）

```
/Users/sunshanshan/Documents/git/wx_app/
├── miniprogram/                         # 小程序前端
│   ├── app.js / app.json / app.wxss     # 入口配置
│   ├── pages/
│   │   ├── scan-entry/                  # [NEW] 扫码入口/场次校验页
│   │   ├── answer/                      # [NEW] 答题页（题目呈现、提交）
│   │   ├── report/                      # [NEW] 报告查看（学员/讲师可共享视图）
│   │   └── admin/                       # [NEW] 场次与题目配置（讲师）
│   ├── components/                      # [NEW] 通用组件（题目渲染、进度、图表占位）
│   └── utils/                           # [NEW] 请求封装、鉴权、节流防抖
├── cloudfunctions/                      # [NEW] 云函数（若用云开发）
│   ├── createSession/                   # 登录、角色判定
│   ├── manageSession/                   # 场次/题目管理
│   ├── submitAnswer/                    # 答题提交与幂等
│   └── generateReport/                  # 聚合统计与报告数据
└── server/                              # [NEW/可选] 自建后端（Koa/Nest）
    ├── src/controllers/                 # 场次、题目、答题、报告接口
    ├── src/services/                    # 业务聚合与权限校验
    ├── src/models/                      # 数据模型/ORM
    └── src/utils/                       # 鉴权、日志、中间件
```

采用小程序原生+TDesign Miniprogram，简洁科技风。首页即扫码/场次入口，答题过程突出进度与剩余时间；报告以卡片+图表呈现整体得分与题目分析。